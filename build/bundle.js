module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=69)}([function(e,t,n){var r=t.global=n(107),i=t.hasBuffer=r&&!!r.isBuffer,o=t.hasArrayBuffer="undefined"!=typeof ArrayBuffer,s=t.isArray=n(8);t.isArrayBuffer=o?function(e){return e instanceof ArrayBuffer||p(e)}:v;var a=t.isBuffer=i?r.isBuffer:v,u=t.isView=o?ArrayBuffer.isView||y("ArrayBuffer","buffer"):v;t.alloc=d,t.concat=function(e,n){n||(n=0,Array.prototype.forEach.call(e,function(e){n+=e.length}));var r=this!==t&&this||e[0],i=d.call(r,n),o=0;return Array.prototype.forEach.call(e,function(e){o+=h.copy.call(e,i,o)}),i},t.from=function(e){return"string"==typeof e?function(e){var t=3*e.length,n=d.call(this,t),r=h.write.call(n,e);t!==r&&(n=h.slice.call(n,0,r));return n}.call(this,e):g(this).from(e)};var c=t.Array=n(109),f=t.Buffer=n(110),l=t.Uint8Array=n(111),h=t.prototype=n(19);function d(e){return g(this).alloc(e)}var p=y("ArrayBuffer");function g(e){return a(e)?f:u(e)?l:s(e)?c:i?f:o?l:c}function v(){return!1}function y(e,t){return e="[object "+e+"]",function(n){return null!=n&&{}.toString.call(t?n[t]:n)===e}}},function(e,t){e.exports=require("auth0-extension-tools@1.3.1")},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";e.exports=n(1).config()},function(e,t,n){const r=n(63),i=n(28),o=n(56),s=n(62);e.exports.createServer=r.createServer,e.exports.urlHelpers=i,e.exports.middlewares=o,e.exports.routes=s},function(e,t){e.exports=require("express@4.12.4")},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";var r=n(150),i=r.createLogger({format:r.format.combine(r.format.simple(),r.format.timestamp(),r.format.colorize()),transports:[new r.transports.Console({level:"debug",handleExceptions:!0})],exitOnError:!1});e.exports=i,e.exports.stream={write:function(e){i.info(e.replace(/\n$/,""))}}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r=n(8);t.createCodec=a,t.install=function(e){for(var t in e)o.prototype[t]=s(o.prototype[t],e[t])},t.filter=function(e){return r(e)?function(e){return e=e.slice(),function(n){return e.reduce(t,n)};function t(e,t){return t(e)}}(e):e};var i=n(0);function o(e){if(!(this instanceof o))return new o(e);this.options=e,this.init()}function s(e,t){return e&&t?function(){return e.apply(this,arguments),t.apply(this,arguments)}:e||t}function a(e){return new o(e)}o.prototype.init=function(){var e=this.options;return e&&e.uint8array&&(this.bufferish=i.Uint8Array),this},t.preset=a({preset:!0})},function(e,t,n){"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,n)});case 4:return process.nextTick(function(){e.call(null,t,n,r)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return process.nextTick(function(){e.apply(null,i)})}}}:e.exports=process},function(e,t,n){"use strict";var r=n(10),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var o=n(26);o.inherits=n(17);var s=n(131),a=n(43);o.inherits(l,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var f=u[c];l.prototype[f]||(l.prototype[f]=a.prototype[f])}function l(e){if(!(this instanceof l))return new l(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){try{var r=n(2);if("function"!=typeof r.inherits)throw"";e.exports=r.inherits}catch(t){e.exports=n(102)}},function(e,t){!function(e){var t,n="undefined",r=n!==typeof Buffer&&Buffer,i=n!==typeof Uint8Array&&Uint8Array,o=n!==typeof ArrayBuffer&&ArrayBuffer,s=[0,0,0,0,0,0,0,0],a=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},u=4294967296,c=16777216;function f(a,f,x){var _=f?0:4,E=f?4:0,k=f?0:3,S=f?1:2,T=f?2:1,A=f?3:0,U=f?y:b,C=f?m:w,M=L.prototype,R="is"+a,B="_"+R;return M.buffer=void 0,M.offset=0,M[B]=!0,M.toNumber=O,M.toString=function(e){var t=this.buffer,n=this.offset,r=j(t,n+_),i=j(t,n+E),o="",s=!x&&2147483648&r;s&&(r=~r,i=u-i);e=e||10;for(;;){var a=r%e*u+i;if(r=Math.floor(r/e),i=Math.floor(a/e),o=(a%e).toString(e)+o,!r&&!i)break}s&&(o="-"+o);return o},M.toJSON=O,M.toArray=l,r&&(M.toBuffer=h),i&&(M.toArrayBuffer=d),L[R]=function(e){return!(!e||!e[B])},e[a]=L,L;function L(e,r,a,c){return this instanceof L?function(e,r,a,c,f){i&&o&&(r instanceof o&&(r=new i(r)),c instanceof o&&(c=new i(c)));if(!(r||a||c||t))return void(e.buffer=v(s,0));if(!p(r,a)){var l=t||Array;f=a,c=r,a=0,r=new l(8)}if(e.buffer=r,e.offset=a|=0,n===typeof c)return;"string"==typeof c?function(e,t,n,r){var i=0,o=n.length,s=0,a=0;"-"===n[0]&&i++;var c=i;for(;i<o;){var f=parseInt(n[i++],r);if(!(f>=0))break;a=a*r+f,s=s*r+Math.floor(a/u),a%=u}c&&(s=~s,a?a=u-a:s++);I(e,t+_,s),I(e,t+E,a)}(r,a,c,f||10):p(c,f)?g(r,a,c,f):"number"==typeof f?(I(r,a+_,c),I(r,a+E,f)):c>0?U(r,a,c):c<0?C(r,a,c):g(r,a,s,0)}(this,e,r,a,c):new L(e,r,a,c)}function O(){var e=this.buffer,t=this.offset,n=j(e,t+_),r=j(e,t+E);return x||(n|=0),n?n*u+r:r}function I(e,t,n){e[t+A]=255&n,n>>=8,e[t+T]=255&n,n>>=8,e[t+S]=255&n,n>>=8,e[t+k]=255&n}function j(e,t){return e[t+k]*c+(e[t+S]<<16)+(e[t+T]<<8)+e[t+A]}}function l(e){var n=this.buffer,r=this.offset;return t=null,!1!==e&&0===r&&8===n.length&&a(n)?n:v(n,r)}function h(e){var n=this.buffer,i=this.offset;if(t=r,!1!==e&&0===i&&8===n.length&&Buffer.isBuffer(n))return n;var o=new r(8);return g(o,0,n,i),o}function d(e){var n=this.buffer,r=this.offset,s=n.buffer;if(t=i,!1!==e&&0===r&&s instanceof o&&8===s.byteLength)return s;var a=new i(8);return g(a,0,n,r),a.buffer}function p(e,t){var n=e&&e.length;return t|=0,n&&t+8<=n&&"string"!=typeof e[t]}function g(e,t,n,r){t|=0,r|=0;for(var i=0;i<8;i++)e[t++]=255&n[r++]}function v(e,t){return Array.prototype.slice.call(e,t,t+8)}function y(e,t,n){for(var r=t+8;r>t;)e[--r]=255&n,n/=256}function m(e,t,n){var r=t+8;for(n++;r>t;)e[--r]=255&-n^255,n/=256}function b(e,t,n){for(var r=t+8;t<r;)e[t++]=255&n,n/=256}function w(e,t,n){var r=t+8;for(n++;t<r;)e[t++]=255&-n^255,n/=256}f("Uint64BE",!0,!0),f("Int64BE",!0,!1),f("Uint64LE",!1,!0),f("Int64LE",!1,!1)}("object"==typeof t&&"string"!=typeof t.nodeName?t:this||{})},function(e,t,n){var r=n(108);t.copy=u,t.slice=c,t.toString=function(e,t,n){return(!s&&i.isBuffer(this)?this.toString:r.toString).apply(this,arguments)},t.write=function(e){return function(){return(this[e]||r[e]).apply(this,arguments)}}("write");var i=n(0),o=i.global,s=i.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,a=s&&!o.TYPED_ARRAY_SUPPORT;function u(e,t,n,o){var s=i.isBuffer(this),u=i.isBuffer(e);if(s&&u)return this.copy(e,t,n,o);if(a||s||u||!i.isView(this)||!i.isView(e))return r.copy.call(this,e,t,n,o);var f=n||null!=o?c.call(this,n,o):this;return e.set(f,t),f.length}function c(e,t){var n=this.slice||!a&&this.subarray;if(n)return n.call(this,e,t);var r=i.alloc.call(this,t-e);return u.call(this,r,0,e,t),r}},function(e,t,n){t.DecodeBuffer=i;var r=n(23).preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}n(40).FlexDecoder.mixin(i.prototype),i.prototype.codec=r,i.prototype.fetch=function(){return this.codec.decode(this)}},function(e,t,n){t.EncodeBuffer=i;var r=n(24).preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}n(40).FlexEncoder.mixin(i.prototype),i.prototype.codec=r,i.prototype.write=function(e){this.codec.encode(this,e)}},function(e,t,n){t.ExtBuffer=function e(t,n){if(!(this instanceof e))return new e(t,n);this.buffer=r.from(t);this.type=n};var r=n(0)},function(e,t,n){var r=n(22).ExtBuffer,i=n(118),o=n(41).readUint8,s=n(120),a=n(9);function u(){var e=this.options;return this.decode=function(e){var t=s.getReadToken(e);return function(e){var n=o(e),r=t[n];if(!r)throw new Error("Invalid type: "+(n?"0x"+n.toString(16):n));return r(e)}}(e),e&&e.preset&&i.setExtUnpackers(this),this}a.install({addExtUnpacker:function(e,t){(this.extUnpackers||(this.extUnpackers=[]))[e]=a.filter(t)},getExtUnpacker:function(e){return(this.extUnpackers||(this.extUnpackers=[]))[e]||function(t){return new r(t,e)}},init:u}),t.preset=u.call(a.preset)},function(e,t,n){var r=n(22).ExtBuffer,i=n(117),o=n(122),s=n(9);function a(){var e=this.options;return this.encode=function(e){var t=o.getWriteType(e);return function(e,n){var r=t[typeof n];if(!r)throw new Error('Unsupported type "'+typeof n+'": '+n);r(e,n)}}(e),e&&e.preset&&i.setExtPackers(this),this}s.install({addExtPacker:function(e,t,n){n=s.filter(n);var i=t.name;if(i&&"Object"!==i){var o=this.extPackers||(this.extPackers={});o[i]=u}else{var a=this.extEncoderList||(this.extEncoderList=[]);a.unshift([t,u])}function u(t){return n&&(t=n(t)),new r(t,e)}},getExtPacker:function(e){var t=this.extPackers||(this.extPackers={}),n=e.constructor,r=n&&n.name&&t[n.name];if(r)return r;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,s=0;s<o;s++){var a=i[s];if(n===a[0])return a[1]}},init:a}),t.preset=a.call(s.preset)},function(e,t,n){var r=n(47),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t){e.exports=require("core-util-is@1.0.1")},function(e,t){e.exports=require("url")},function(e,t,n){const r=n(27),i=3,o=2,s=1,a=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports.getBasePath=function(e){return t=e.originalUrl||"",n=e.path,(i=(i=r.parse(t).pathname||"").replace(n,"").replace(/^\/|\/$/g,"")).startsWith("/")||(i="/"+i),i.endsWith("/")||(i+="/"),i;var t,n,i},e.exports.getBaseUrl=function(e,t){var n=t;const i=r.parse(e.originalUrl||"").pathname||"";return r.format({protocol:n||"https",host:e.headers.host,pathname:i.replace(e.path,"").replace(/\/$/g,"")})},e.exports.getWebtaskUrl=function(e){const t=function(e){if(!e.container)return null;const t=e.container.replace(a,"\\$&"),n=e.jtn?e.jtn.replace(a,"\\$&"):"";if(e.url_format===s)return new RegExp("^/api/run/"+t+"/(?:"+n+"/?)?");if(e.url_format===o)return new RegExp("^/"+t+"/(?:"+n+"/?)?");if(e.url_format===i)return new RegExp("^/(?:"+n+"/?)?");throw new Error("Unsupported webtask URL format.")}(e.x_wt),n=e.url,u=e.url.replace(t,"/"),c=r.parse(u||"").pathname,f=e.x_wt&&e.x_wt.ectx&&e.x_wt.ectx.ISOLATED_DOMAIN||!1,l=r.parse(n||"").pathname||"";var h;if(f){h=r.format({protocol:"https",host:e.headers.host,pathname:l.replace(c,"").replace(/\/$/g,"")});const t=".it.auth0.com/api/run/"+e.x_wt.container+"/",n=function(e,t){if(!e)return null;const n=e.indexOf("sandbox8")>=0?"8":"";return"https://"+t+"."+(e.split(".it.auth0.com")[0].split("-")[1]||"us")+n+".webtask.io/"}(h,e.x_wt.container);h.indexOf(t)>=0&&(h=h.replace("https://"+e.headers.host+"/api/run/"+e.x_wt.container+"/",n))}else h=l;return h}},function(e,t,n){"use strict";var r=n(123);e.exports=function(e,t,n){return function(i,o,s){var a=r(s);return!0===e||"function"==typeof e&&e(i,o,a)?t(i,o,a):n?n(i,o,a):a()}}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(85),i=n(30);e.exports=function(e){return r(i(e))}},function(e,t,n){!function(t){e.exports=t;var n="listeners",r={on:function(e,t){return s(this,e).push(t),this},once:function(e,t){var n=this;return r.originalListener=t,s(n,e).push(r),n;function r(){o.call(n,e,r),t.apply(this,arguments)}},off:o,emit:function(e,t){var n=this,r=s(n,e,!0);if(!r)return!1;var i=arguments.length;if(1===i)r.forEach(function(e){e.call(n)});else if(2===i)r.forEach(function(e){e.call(n,t)});else{var o=Array.prototype.slice.call(arguments,1);r.forEach(function(e){e.apply(n,o)})}return!!r.length}};function i(e){for(var t in r)e[t]=r[t];return e}function o(e,t){var r;if(arguments.length){if(t){if(r=s(this,e,!0)){if(!(r=r.filter(function(e){return e!==t&&e.originalListener!==t})).length)return o.call(this,e);this[n][e]=r}}else if((r=this[n])&&(delete r[e],!Object.keys(r).length))return o.call(this)}else delete this[n];return this}function s(e,t,r){if(!r||e[n]){var i=e[n]||(e[n]={});return i[t]||(i[t]=[])}}i(t.prototype),t.mixin=i}(
/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */
function e(){if(!(this instanceof e))return new e})},function(e,t,n){"use strict";e.exports=class e{constructor(e,t){this.epoch=e,this.nano=t}static pack(e){const t=Buffer.allocUnsafe(8);return t.writeUInt32BE(e.epoch,0),t.writeUInt32BE(e.nano,4),t}static unpack(t){const n=t.readUInt32BE(0),r=t.readUInt32BE(4);return new e(n,r)}static now(){const t=Date.now();return e.fromTimestamp(t)}static fromDate(t){const n=t.getTime();return e.fromTimestamp(n)}static fromTimestamp(t){const n=Math.floor(t/1e3);return new e(n,t%1e3*1e6)}}},function(e,t,n){"use strict";const r=n(49).EventEmitter,i=n(106),o=n(146),s=n(6),a=n(48),u=n(148),c=n(152),f=n(100),l=n(34),h=i.createCodec();h.addExtPacker(0,l,l.pack),h.addExtUnpacker(0,l.unpack);class d{constructor(e,t){if(t=t||{},this._eventMode=t.eventMode||"Message",!/^Message|PackedForward|CompressedPackedForward$/.test(this._eventMode))throw new f.ConfigError("Unknown event mode: "+this._eventMode);this.tag_prefix=e,this.host=t.host||"localhost",this.port=t.port||24224,this.path=t.path,this.timeout=t.timeout||3,this.tls=!!t.tls,this.tlsOptions=t.tlsOptions||{},this.enableReconnect="boolean"!=typeof t.enableReconnect||t.enableReconnect,this.reconnectInterval=t.reconnectInterval||6e5,this.requireAckResponse=t.requireAckResponse,this.ackResponseTimeout=t.ackResponseTimeout||19e4,this.internalLogger=t.internalLogger||console,this._timeResolution=t.milliseconds?1:1e3,this._socket=null,"Message"===this._eventMode?(this._sendQueue=[],this._flushInterval=0):(this._sendQueue=new Map,this._flushInterval=t.flushInterval||100,this._sendQueueSizeLimit=t.sendQueueSizeLimit||8388608,this._sendQueueSize=0,this._flushSendQueueTimeoutId=null,this._compressed="CompressedPackedForward"===this._eventMode),this._eventEmitter=new r,this.security=t.security||{clientHostname:null,sharedKey:null,username:"",password:""},this.sharedKeySalt=a.randomBytes(16).toString("hex"),this._status=null,this._connecting=!1}emit(e,t,n,r){let i,o,s,a,u,c;"string"==typeof e?(i=e,o=t,u=n,c=r):(o=e,u=t,c=n),"function"==typeof u?a=u:u&&(s=u,"function"==typeof c&&(a=c));const l=this._makeTag(i);let h,d;return null===l?(d={tag_prefix:this.tag_prefix,label:i},h=new f.MissingTag("tag is missing",d),void this._handleEvent("error",h,a)):"object"!=typeof o?(d={tag_prefix:this.tag_prefix,label:i,record:o},h=new f.DataTypeError("data must be an object",d),void this._handleEvent("error",h,a)):(this._push(l,s,o,a),void this._connect(()=>{this._flushSendQueue()}))}end(e,t,n){null!=e&&null!=t?this.emit(e,t,e=>{this._close(),e?this._handleEvent("error",e,n):n&&n()}):process.nextTick(()=>{this._close(),n&&n()})}_close(){this._socket&&(this._socket.end(),this._socket=null,this._status=null)}_makeTag(e){let t=null;return this.tag_prefix&&e?t=`${this.tag_prefix}.${e}`:this.tag_prefix?t=this.tag_prefix:e&&(t=e),t}_makePacketItem(e,t,n){t&&("number"==typeof t||t instanceof l)||(t=Math.floor((t?t.getTime():Date.now())/this._timeResolution));const r=[e,t,n];let o={};return this.requireAckResponse&&(o={chunk:a.randomBytes(16).toString("base64")},r.push(o)),{packet:i.encode(r,{codec:h}),tag:e,time:t,data:n,options:o}}_makeEventEntry(e,t){return e&&("number"==typeof e||e instanceof l)||(e=Math.floor((e?e.getTime():Date.now())/this._timeResolution)),i.encode([e,t],{codec:h})}_push(e,t,n,r){if("Message"===this._eventMode){let i=this._makePacketItem(e,t,n);i.callback=r,this._sendQueue.push(i)}else{const i=this._makeEventEntry(t,n);if(this._sendQueueSize+=i.length,this._sendQueue.has(e)){let t=this._sendQueue.get(e);t.eventEntries.push(i),r&&t.callbacks.push(r)}else{const t=r?[r]:[];this._sendQueue.set(e,{eventEntries:[i],callbacks:t})}}}_connect(e){this._connecting||(null===this._socket?(this._connecting=!0,this._doConnect(()=>{this._connecting=!1,e()})):this._socket.writable?(this._connecting=!1,process.nextTick(e)):(this._disconnect(),this._connect(e)))}_doConnect(e){let t=()=>{let e=e=>{this._socket&&(this._disconnect(),this._handleEvent("error",e))};this._socket.on("error",e),this._socket.on("connect",()=>{this._handleEvent("connect")}),this.tls&&(this._socket.on("tlsClientError",e),this._socket.on("secureConnect",()=>{this._handleEvent("connect")}))};if(this.tls||(this._socket=new o.Socket,this._socket.setTimeout(this.timeout),t()),this.path)this.tls?(this._socket=u.connect(Object.assign({},this.tlsOptions,{path:this.path}),()=>{e()}),t()):this._socket.connect(this.path,()=>{e()});else{let n=()=>{this.security.clientHostname&&null!==this.security.sharedKey?this._handshake(e):(this._status="established",e())};this.tls?(this._socket=u.connect(Object.assign({},this.tlsOptions,{host:this.host,port:this.port}),()=>{n()}),t()):this._socket.connect(this.port,this.host,()=>{n()})}}_disconnect(){this._socket&&this._socket.destroy(),this._socket=null,this._status=null,this._connecting=!1}_handshake(e){"established"!==this._status&&(this._status="helo",this._socket.once("data",t=>{if(this._socket.pause(),!this._checkHelo(t).succeeded)return this.internalLogger.error("Received invalid HELO message from "+this._socket.remoteAddress),void this._disconnect();this._status="pingpong",this._socket.write(this._generatePing(),()=>{this._socket.resume(),this._socket.once("data",t=>{const n=this._checkPong(t);if(!n.succeeded){this.internalLogger.error(n.message);const e=new f.HandshakeError(n.message);return this._handleEvent("error",e),void this._disconnect()}this._status="established",this.internalLogger.info("Established"),e()})})}))}_flushSendQueue(){this._flushingSendQueue||(this._flushingSendQueue=!0,this._waitToWrite())}_waitToWrite(){this._socket?this._socket.writable?"Message"===this._eventMode?this._doFlushSendQueue():this._sendQueueSize>=this._sendQueueSizeLimit?(this._flushSendQueueTimeoutId&&clearTimeout(this._flushSendQueueTimeoutId),this._doFlushSendQueue()):(this._flushSendQueueTimeoutId&&clearTimeout(this._flushSendQueueTimeoutId),this._flushSendQueueTimeoutId=setTimeout(()=>{this._doFlushSendQueue()},this._flushInterval)):process.nextTick(()=>{this._waitToWrite()}):this._flushingSendQueue=!1}_doFlushSendQueue(e){if("Message"===this._eventMode){let t=this._sendQueue.shift();if(void 0===t)return void(this._flushingSendQueue=!1);this._doWrite(t.packet,t.options,e,[t.callback])}else{if(0===this._sendQueue.size)return void(this._flushingSendQueue=!1);let t=this._sendQueue.entries().next().value,n=t[0],r=t[1],o=Buffer.concat(r.eventEntries,this._sendQueueSize),s=o.length;this._sendQueue.delete(n),this._compressed&&(s=(o=c.gzipSync(o)).length);const u={chunk:a.randomBytes(16).toString("base64"),size:s,compressed:this._compressed?"gzip":"text"},f=i.encode([n,o,u],{codec:h});this._doWrite(f,u,e,r.callbacks)}}_doWrite(e,t,n,r){const o=this._sendQueueSize;this._socket.write(e,()=>{this.requireAckResponse?(this._socket.once("data",e=>{n&&clearTimeout(n);const s=i.decode(e,{codec:h});if(s.ack!==t.chunk){const e=new f.ResponseError("ack in response and chunk id in sent data are different",{ack:s.ack,chunk:t.chunk});r.forEach(t=>{this._handleEvent("error",e,t)})}this._sendQueueSize-=o,r.forEach(e=>{e&&e()}),process.nextTick(()=>{this._waitToWrite()})}),n=setTimeout(()=>{const e=new f.ResponseTimeout("ack response timeout");r.forEach(t=>{this._handleEvent("error",e,t)})},this.ackResponseTimeout)):(this._sendQueueSize-=o,r.forEach(e=>{e&&e()}),process.nextTick(()=>{this._waitToWrite()}))})}_handleEvent(e,t,n){n&&n(t),this._eventEmitter.listenerCount(e)>0&&this._eventEmitter.emit(e,t)}_setupErrorHandler(e){this.reconnectInterval&&this.enableReconnect&&this.on("error",t=>{this._flushingSendQueue=!1,this._status=null,this.internalLogger.error("Fluentd error",t),this.internalLogger.info("Fluentd will reconnect after "+this.reconnectInterval/1e3+" seconds");let n=setTimeout(()=>{this.internalLogger.info("Fluentd is reconnecting..."),this._connect(()=>{this._flushSendQueue(),this.internalLogger.info("Fluentd reconnection finished!!")})},this.reconnectInterval);e&&e(n)})}_checkHelo(e){this.internalLogger.info("Checking HELO...");const t=i.decode(e);if(2!==t.length)return{succeeded:!1,message:"Invalid format for HELO message"};if("HELO"!==t[0])return{succeeded:!1,message:"Invalid format for HELO message"};const n=t[1]||{};return this.sharedKeyNonce=n.nonce||"",this.authentication=n.auth||"",{succeeded:!0}}_generatePing(){const e=a.createHash("sha512").update(this.sharedKeySalt).update(this.security.clientHostname).update(this.sharedKeyNonce).update(this.security.sharedKey).digest("hex"),t=["PING",this.security.clientHostname,this.sharedKeySalt,e];if(Buffer.isBuffer(this.authentication)&&0!==this.authentication.length){const e=a.createHash("sha512").update(this.authentication).update(this.security.username||"").update(this.security.password||"").digest("hex");t.push(this.security.username,e)}else t.push("","");return i.encode(t)}_checkPong(e){this.internalLogger.info("Checking PONG...");const t=i.decode(e);if(5!==t.length)return!1;if("PONG"!==t[0])return{succeeded:!1,message:"Invalid format for PONG message"};t[0];const n=t[1],r=t[2],o=t[3],s=t[4];return n?o===this.security.clientHostname?{succeeded:!1,message:"Same hostname between input and output: invalid configuration"}:s!==a.createHash("sha512").update(this.sharedKeySalt).update(o).update(this.sharedKeyNonce).update(this.security.sharedKey).digest("hex")?{succeeded:!1,message:"Sharedkey mismatch"}:{succeeded:!0}:{succeeded:!1,message:"Authentication failed: "+r}}toStream(e){const t=(e="string"==typeof e?{label:e}:e||{}).label;if(!t)throw new Error("label is needed");const n=e.encoding||"UTF-8",r=new s.Writable;let i="";return r._write=((e,r,o)=>{const s=e.toString(n).split(/\n/);let a=()=>{s.length&&(i+=s.shift()),s.length?this.emit(t,{message:i},e=>{e?this._handleEvent("error",e,o):(i="",a())}):process.nextTick(o)};a()}),r}}["addListener","on","once","removeListener","removeAllListeners","setMaxListeners","getMaxListeners"].forEach((e,t)=>{d.prototype[e]=function(){return this._eventEmitter[e].apply(this._eventEmitter,Array.from(arguments))}}),e.exports=d},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=e[t+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=a;f>0;o=256*o+e[t+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+e[t+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*u-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+d]=255&s,d+=p,s/=256,c-=8);e[n+d-p]|=128*g}},function(e,t,n){"use strict";var r=n(105);function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new i("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(r(e.split(".")[n]))}catch(e){throw new i("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=i},function(e,t,n){t.decode=function(e,t){var n=new r(t);return n.write(e),n.read()};var r=n(20).DecodeBuffer},function(e,t,n){t.encode=function(e,t){var n=new r(t);return n.write(e),n.read()};var r=n(21).EncodeBuffer},function(e,t,n){t.FlexDecoder=a,t.FlexEncoder=u;var r=n(0),i=2048,o=65536,s="BUFFER_SHORTAGE";function a(){if(!(this instanceof a))return new a}function u(){if(!(this instanceof u))return new u}function c(){throw new Error("method not implemented: write()")}function f(){throw new Error("method not implemented: fetch()")}function l(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function h(e){(this.buffers||(this.buffers=[])).push(e)}function d(){return(this.buffers||(this.buffers=[])).shift()}function p(e){return function(t){for(var n in e)t[n]=e[n];return t}}a.mixin=p(function(){return{bufferish:r,write:function(e){var t=this.offset?r.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=t?e?this.bufferish.concat([t,e]):t:e,this.offset=0},fetch:f,flush:function(){for(;this.offset<this.buffer.length;){var e,t=this.offset;try{e=this.fetch()}catch(e){if(e&&e.message!=s)throw e;this.offset=t;break}this.push(e)}},push:h,pull:d,read:l,reserve:function(e){var t=this.offset,n=t+e;if(n>this.buffer.length)throw new Error(s);return this.offset=n,t},offset:0}}()),a.mixin(a.prototype),u.mixin=p(function(){return{bufferish:r,write:c,fetch:function(){var e=this.start;if(e<this.offset){var t=this.start=this.offset;return r.prototype.slice.call(this.buffer,e,t)}},flush:function(){for(;this.start<this.offset;){var e=this.fetch();e&&this.push(e)}},push:h,pull:function(){var e=this.buffers||(this.buffers=[]),t=e.length>1?this.bufferish.concat(e):e[0];return e.length=0,t},read:l,reserve:function(e){var t=0|e;if(this.buffer){var n=this.buffer.length,r=0|this.offset,i=r+t;if(i<n)return this.offset=i,r;this.flush(),e=Math.max(e,Math.min(2*n,this.maxBufferSize))}return e=Math.max(e,this.minBufferSize),this.buffer=this.bufferish.alloc(e),this.start=0,this.offset=t,0},send:function(e){var t=e.length;if(t>this.minBufferSize)this.flush(),this.push(e);else{var n=this.reserve(t);r.prototype.copy.call(e,this.buffer,n)}},maxBufferSize:o,minBufferSize:i,offset:0,start:0}}()),u.mixin(u.prototype)},function(e,t,n){var r=n(36),i=n(18),o=i.Uint64BE,s=i.Int64BE;t.getReadFormat=function(e){var t=a.hasArrayBuffer&&e&&e.binarraybuffer,n=e&&e.int64;return{map:c&&e&&e.usemap?h:l,array:d,str:p,bin:t?v:g,ext:y,uint8:m,uint16:w,uint32:_,uint64:k(8,n?A:S),int8:b,int16:x,int32:E,int64:k(8,n?U:T),float32:k(4,C),float64:k(8,M)}},t.readUint8=m;var a=n(0),u=n(19),c="undefined"!=typeof Map,f=!0;function l(e,t){var n,r={},i=new Array(t),o=new Array(t),s=e.codec.decode;for(n=0;n<t;n++)i[n]=s(e),o[n]=s(e);for(n=0;n<t;n++)r[i[n]]=o[n];return r}function h(e,t){var n,r=new Map,i=new Array(t),o=new Array(t),s=e.codec.decode;for(n=0;n<t;n++)i[n]=s(e),o[n]=s(e);for(n=0;n<t;n++)r.set(i[n],o[n]);return r}function d(e,t){for(var n=new Array(t),r=e.codec.decode,i=0;i<t;i++)n[i]=r(e);return n}function p(e,t){var n=e.reserve(t),r=n+t;return u.toString.call(e.buffer,"utf-8",n,r)}function g(e,t){var n=e.reserve(t),r=n+t,i=u.slice.call(e.buffer,n,r);return a.from(i)}function v(e,t){var n=e.reserve(t),r=n+t,i=u.slice.call(e.buffer,n,r);return a.Uint8Array.from(i).buffer}function y(e,t){var n=e.reserve(t+1),r=e.buffer[n++],i=n+t,o=e.codec.getExtUnpacker(r);if(!o)throw new Error("Invalid ext type: "+(r?"0x"+r.toString(16):r));return o(u.slice.call(e.buffer,n,i))}function m(e){var t=e.reserve(1);return e.buffer[t]}function b(e){var t=e.reserve(1),n=e.buffer[t];return 128&n?n-256:n}function w(e){var t=e.reserve(2),n=e.buffer;return n[t++]<<8|n[t]}function x(e){var t=e.reserve(2),n=e.buffer,r=n[t++]<<8|n[t];return 32768&r?r-65536:r}function _(e){var t=e.reserve(4),n=e.buffer;return 16777216*n[t++]+(n[t++]<<16)+(n[t++]<<8)+n[t]}function E(e){var t=e.reserve(4),n=e.buffer;return n[t++]<<24|n[t++]<<16|n[t++]<<8|n[t]}function k(e,t){return function(n){var r=n.reserve(e);return t.call(n.buffer,r,f)}}function S(e){return new o(this,e).toNumber()}function T(e){return new s(this,e).toNumber()}function A(e){return new o(this,e)}function U(e){return new s(this,e)}function C(e){return r.read(this,e,!1,23,4)}function M(e){return r.read(this,e,!1,52,8)}},function(e,t){for(var n=t.uint8=new Array(256),r=0;r<=255;r++)n[r]=i(r);function i(e){return function(t){var n=t.reserve(1);t.buffer[n]=e}}},function(e,t,n){"use strict";var r=n(10);function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var o,s=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:r.nextTick;v.WritableState=g;var a=n(26);a.inherits=n(17);var u={deprecate:n(129)},c=n(45),f=n(25).Buffer,l=global.Uint8Array||function(){};var h,d=n(44);function p(){}function g(e,t){o=o||n(11),e=e||{};var a=t instanceof o;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var u=e.highWaterMark,c=e.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=u||0===u?u:a&&(c||0===c)?c:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(_,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),_(e,t))}(e,n,i,t,o);else{var a=w(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||b(e,n),i?s(m,e,n,a,o):m(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function v(e){if(o=o||n(11),!(h.call(v,this)||this instanceof o))return new v(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function y(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function m(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),_(e,t)}function b(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,y(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,f=n.encoding,l=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,f,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),_(e,t)})}function _(e,t){var n=w(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(x,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}a.inherits(v,c),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===v&&(e&&e._writableState instanceof g)}})):h=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,f.isBuffer(i)||i instanceof l);return a&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=p),o.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),r.nextTick(i,s),o=!1),o}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,a,r,i,o);return u}(this,o,a,e,t,n)),s},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,_(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=d.destroy,v.prototype._undestroy=d.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}},function(e,t,n){"use strict";var r=n(10);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){e.exports=n(6)},function(e,t,n){"use strict";var r=n(134).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=f,this.end=l,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function l(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t){e.exports=require("buffer")},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("express-jwt@3.1.0")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";(function(t){n(27);var r=n(51),i=n(145),o=n(5),s=n(137),a=n(1),u=n(4),c=n(67),f=n(68),l=n(65),h=n(7),d=n(3),p=n(64);e.exports=function(e,n){d.setProvider(e);var g=n?new a.WebtaskStorageContext(n,{force:1}):new a.FileStorageContext(r.join(t,"./data.json"),{mergeWrites:!0}),v=new o;v.use(i(":method :url :status :response-time ms - :res[content-length]",{stream:h.stream}));var y=function(e){return function(t,n,r){return t.webtaskContext&&t.webtaskContext.body?(t.body=t.webtaskContext.body,r()):e(t,n,r)}};return v.use(y(s.json())),v.use(y(s.urlencoded({extended:!1}))),v.use("/meta",f()),v.use("/.extensions",l()),v.use(p(g)),v.use(u.routes.dashboardAdmins({secret:d("EXTENSION_SECRET"),audience:"urn:logs-to-fluentd",rta:d("AUTH0_RTA").replace("https://",""),domain:d("AUTH0_DOMAIN"),baseUrl:d("PUBLIC_WT_URL")||d("WT_URL"),clientName:"Logs to Fluentd",urlPrefix:"",sessionStorageKey:"logs-to-fluentd:apiToken"})),v.use("/app",o.static(r.join(t,"../dist"))),v.use("/",c(g)),v.use(u.middlewares.errorHandler(h.error.bind(h))),v}}).call(t,"/")},function(e,t,n){const r=n(37),i=n(50),o=n(1),s=n(29);e.exports=function(e){if(!e||"object"!=typeof e)throw new o.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new o.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new o.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new o.ArgumentError("Must provide a valid secret");if("string"!=typeof e.audience||0===e.audience.length)throw new o.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.baseUrl||void 0===e.baseUrl)throw new o.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new o.ArgumentError("The provided base URL is invalid: "+e.baseUrl);const t=i({audience:e.audience,issuer:e.baseUrl,secret:e.secret,algorithms:["HS256"],credentialsRequired:e.credentialsRequired||!0});return function(n,r,i){t(n,r,function(t){return t?i(t):e.onLoginSuccess?e.onLoginSuccess(n,r,i):i()})}},e.exports.optional=function(t){const n=e.exports(t);return s(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const n=r(e.headers.authorization.split(" ")[1]);return n&&n.iss===t.baseUrl}catch(e){return!1}return!1},n)}},function(e,t,n){const r=n(37),i=n(50),o=n(142),s=n(1),a=n(29),u=n(1).UnauthorizedError;e.exports=function(e){if(!e||"object"!=typeof e)throw new s.ArgumentError("Must provide the options");if(null===e.domain||void 0===e.domain)throw new s.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new s.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.audience||void 0===e.audience)throw new s.ArgumentError("Must provide a valid audience");if("string"!=typeof e.audience||0===e.audience.length)throw new s.ArgumentError("The provided audience is invalid: "+e.audience);const t=i({secret:o.expressJwtSecret({cache:!0,rateLimit:!0,jwksRequestsPerMinute:5,jwksUri:"https://"+e.domain+"/.well-known/jwks.json",handleSigningKeyError:function(e,t){return e instanceof o.SigningKeyNotFoundError?t(new u("A token was provided with an invalid kid")):t(e)}}),audience:e.audience,issuer:"https://"+e.domain+"/",algorithms:["RS256"],credentialsRequired:e&&e.credentialsRequired||!0});return function(n,r,i){t(n,r,function(t){return t?i(t):e.onLoginSuccess?e.onLoginSuccess(n,r,i):i()})}},e.exports.optional=function(t){const n=e.exports(t);return a(function(e){if(e&&e.headers&&e.headers.authorization&&0===e.headers.authorization.indexOf("Bearer "))try{const n=r(e.headers.authorization.split(" ")[1]);return n&&n.iss==="https://"+t.domain+"/"}catch(e){return!1}return!1},n)}},function(e,t,n){e.exports=function(e){return function(t,n,r,i){return e&&e(t),t&&t.status?(r.status(t.status),r.json({error:t.code||t.name,message:t.message||t.name})):(r.status(t.status||500),r.json({error:"InternalServerError",message:t.message||t.name}))}}},function(e,t,n){e.exports.authenticateAdmins=n(53),e.exports.authenticateUsers=n(54),e.exports.requireAuthentication=n(58),e.exports.errorHandler=n(55),e.exports.managementApiClient=n(57),e.exports.validateHookToken=n(59),e.exports.webtaskConfig=n(60)},function(e,t,n){const r=n(1);e.exports=function(e){return function(t,n,i){const o=t,s=t.user&&t.user.access_token&&t.user.access_token.length?{domain:e.domain,accessToken:t.user.access_token}:e;r.managementApi.getClient(s).then(function(e){return o.auth0=e,i(),null}).catch(function(e){i(e)})}}},function(e,t,n){const r=n(1).UnauthorizedError;e.exports=function(e,t,n){return e.user?n():n(new r("Authentication required for this endpoint."))}},function(e,t,n){const r=n(1);e.exports=function(e,t,n){if(null==e)throw new r.ArgumentError("Must provide the domain");if("string"!=typeof e||0===e.length)throw new r.ArgumentError("The provided domain is invalid: "+e);if(null==t)throw new r.ArgumentError("Must provide the webtaskUrl");if("string"!=typeof t||0===t.length)throw new r.ArgumentError("The provided webtaskUrl is invalid: "+t);if(null==n)throw new r.ArgumentError("Must provide the extensionSecret");if("string"!=typeof n||0===n.length)throw new r.ArgumentError("The provided extensionSecret is invalid: "+n);return function(i){if(null==i)throw new r.ArgumentError("Must provide the hookPath");if("string"!=typeof i||0===i.length)throw new r.ArgumentError("The provided hookPath is invalid: "+i);return function(o,s,a){if(o.headers.authorization&&"Bearer"===o.headers.authorization.split(" ")[0]){const s=o.headers.authorization.split(" ")[1];try{if(r.validateHookToken(e,t,i,n,s))return a()}catch(e){return a(e)}}return a(new r.HookTokenError("Hook token missing for the call to: "+i))}}}},function(e,t,n){const r=n(1);e.exports=function(e){return function(t,n,i){return t.webtaskContext&&e.setProvider(r.configProvider.fromWebtaskContext(t.webtaskContext)),i()}}},function(e,t,n){const r=n(5),i=n(48),o=n(71),s=n(141),a=n(1),u=n(28);e.exports=function(e){if(!e||"object"!=typeof e)throw new a.ArgumentError("Must provide the options");if(null===e.secret||void 0===e.secret)throw new a.ArgumentError("Must provide a valid secret");if("string"!=typeof e.secret||0===e.secret.length)throw new a.ArgumentError("The provided secret is invalid: "+e.secret);if(null===e.audience||void 0===e.audience)throw new a.ArgumentError("Must provide a valid audience");if("string"!=typeof e.audience||0===e.audience.length)throw new a.ArgumentError("The provided audience is invalid: "+e.audience);if(null===e.rta||void 0===e.rta)throw new a.ArgumentError("Must provide a valid rta");if("string"!=typeof e.rta||0===e.rta.length)throw new a.ArgumentError("The provided rta is invalid: "+e.rta);if(null===e.domain||void 0===e.domain)throw new a.ArgumentError("Must provide a valid domain");if("string"!=typeof e.domain||0===e.domain.length)throw new a.ArgumentError("The provided domain is invalid: "+e.domain);if(null===e.baseUrl||void 0===e.baseUrl)throw new a.ArgumentError("Must provide a valid base URL");if("string"!=typeof e.baseUrl||0===e.baseUrl.length)throw new a.ArgumentError("The provided base URL is invalid: "+e.baseUrl);if(null===e.clientName||void 0===e.clientName)throw new a.ArgumentError("Must provide a valid client name");if("string"!=typeof e.clientName||0===e.clientName.length)throw new a.ArgumentError("The provided client name is invalid: "+e.clientName);const t=e.stateKey||"state",n=e.nonceKey||"nonce",c=e.urlPrefix||"",f=e.sessionStorageKey||"apiToken",l=r.Router();return l.get(c+"/login",function(r,o){const s=i.randomBytes(16).toString("hex"),f=i.randomBytes(16).toString("hex");o.cookie(t,s),o.cookie(n,f);const l=new a.SessionManager(e.rta,e.domain,e.baseUrl).createAuthorizeUrl({redirectUri:u.getBaseUrl(r)+c+"/login/callback",scopes:e.scopes,expiration:e.expiration,nonce:f,state:s});o.redirect(l)}),l.post(c+"/login/callback",o(),function(r,i,o){var c;try{c=s.decode(r.body.id_token)}catch(e){c=null}if(!c||!r.cookies||r.cookies[n]!==c.nonce)return o(new a.ValidationError("Login failed. Nonce mismatch."));if(!r.cookies||r.cookies[t]!==r.body.state)return o(new a.ValidationError("Login failed. State mismatch."));return new a.SessionManager(e.rta,e.domain,e.baseUrl).create(r.body.id_token,r.body.access_token,{secret:e.secret,issuer:e.baseUrl,audience:e.audience}).then(function(e){i.header("Content-Type","text/html"),i.status(200).send('<html><head><script type="text/javascript">sessionStorage.setItem("'+f+'", "'+e+'");window.location.href = "'+u.getBaseUrl(r)+'";<\/script></head></html>')}).catch(function(e){o(e)})}),l.get(c+"/logout",function(t,n){const r=encodeURIComponent(u.getBaseUrl(t));n.header("Content-Type","text/html"),n.status(200).send('<html><head><script type="text/javascript">sessionStorage.removeItem("'+f+'");window.location.href = "https://'+e.rta+"/v2/logout/?returnTo="+r+"&client_id="+r+'";<\/script></head></html>')}),l.get("/.well-known/oauth2-client-configuration",function(t,n){n.header("Content-Type","application/json"),n.status(200).send({redirect_uris:[u.getBaseUrl(t)+c+"/login/callback"],client_name:e.clientName,post_logout_redirect_uris:[u.getBaseUrl(t)]})}),l}},function(e,t,n){e.exports.dashboardAdmins=n(61)},function(e,t,n){const r=n(1),i=n(149);e.exports.createServer=function(e){const t=r.createServer(e);var n=null;return i.fromExpress(function(e,r){return n||(n=t(e.webtaskContext)),n(e,r)})}},function(e,t,n){"use strict";var r,i=n(70),o=(r=i)&&r.__esModule?r:{default:r};var s=n(135),a=(n(147),n(144)),u=(n(27),n(99)),c=n(136),f=n(3),l=n(7);e.exports=function(e){return function(t,n,r){var i=t.webtaskContext&&t.webtaskContext.body||t.body||{},h=t.webtaskContext&&t.webtaskContext.headers||{};if(!(i.schedule&&"active"===i.state||h.referer===f("AUTH0_MANAGE_URL")+"/"&&h["if-none-match"]))return r();var d={host:f("FLUENTD_HOST"),port:f("FLUENTD_PORT"),security:{},timeout:3,tls:"true"===f("FLUENTD_TLS")},p=f("FLUENTD_SHARED_KEY");p&&(d.security.sharedKey=p),u.configure("auth0",d);var g=Date.now(),v=function(e,t){if(!e)return t();var n={post_date:g,type_description:c.logTypes.get(e.type)};(0,o.default)(e).forEach(function(t){n[t]=e[t]}),u.emit(n,t)},y=new c.reporters.SlackReporter({hook:f("SLACK_INCOMING_WEBHOOK_URL"),username:"auth0-logs-to-fluentd",title:"Logs To Fluentd"}),m={domain:f("AUTH0_DOMAIN"),clientId:f("AUTH0_CLIENT_ID"),clientSecret:f("AUTH0_CLIENT_SECRET"),batchSize:parseInt(f("BATCH_SIZE"),10),startFrom:f("START_FROM"),logTypes:f("LOG_TYPES"),logLevel:f("LOG_LEVEL")};(!m.batchSize||m.batchSize>100)&&(m.batchSize=100),m.logTypes&&!Array.isArray(m.logTypes)&&(m.logTypes=m.logTypes.replace(/\s/g,"").split(","));var b=new c.LogsProcessor(e,m),w=function(){e.read().then(function(t){var n,r,i,o=a().format("DD-MM-YYYY"),s=f("DAILY_REPORT_TIME")||16;t.lastReportDate!==o&&(new Date).getHours()>=s&&(n=o,r=(new Date).getTime(),i=r-864e5,b.getReport(i,r).then(function(e){return y.send(e,e.checkpoint)}).then(function(){return e.read()}).then(function(t){return t.lastReportDate=n,e.write(t)}))})};return b.run(function(e,t){if(!e||!e.length)return t();l.info("Sending "+e.length+" logs to Fluentd."),s.eachLimit(e,10,v,t)}).then(function(e){e&&e.status&&e.status.error?y.send(e.status,e.checkpoint):!0!==f("SLACK_SEND_SUCCESS")&&"true"!==f("SLACK_SEND_SUCCESS")||y.send(e.status,e.checkpoint),w(),n.json(e)}).catch(function(e){y.send({error:e,logsProcessed:0},null),w(),r(e)})}}},function(e,t,n){"use strict";var r=n(5).Router,i=n(4).middlewares,o=n(3),s=n(7);e.exports=function(){var e=r(),t=i.validateHookToken(o("AUTH0_DOMAIN"),o("WT_URL"),o("EXTENSION_SECRET"));return e.use("/on-uninstall",t("/.extensions/on-uninstall")),e.use(i.managementApiClient({domain:o("AUTH0_DOMAIN"),clientId:o("AUTH0_CLIENT_ID"),clientSecret:o("AUTH0_CLIENT_SECRET")})),e.delete("/on-uninstall",function(e,t){var n=o("AUTH0_CLIENT_ID");e.auth0.clients.delete({client_id:n}).then(function(){s.debug("Deleted client "+n),t.sendStatus(204)}).catch(function(e){s.debug("Error deleting client: "+o("AUTH0_CLIENT_ID")),s.error(e),t.sendStatus(204)})}),e}},function(e,t,n){"use strict";(function(t){n(140);var r=n(139),i=(n(51),n(4).urlHelpers),o=n(3);e.exports=function(){var e='\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n    <title><%= config.TITLE %></title>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="shortcut icon" href="https://cdn.auth0.com/styleguide/4.6.13/lib/logos/img/favicon.png">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styles/zocial.min.css" />\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/manage/v0.3.1672/css/index.min.css" />\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styleguide/4.6.13/index.min.css" />\n    <% if (assets.style) { %><link rel="stylesheet" type="text/css" href="/app/<%= assets.style %>" /><% } %>\n    <% if (assets.version) { %><link rel="stylesheet" type="text/css" href="//cdn.auth0.com/extensions/auth0-logs-to-logstash/assets/auth0-logs-to-logstash.ui.2.1.0.css" /><% } %>\n    <% if (assets.customCss) { %><link rel="stylesheet" type="text/css" href="<%= assets.customCss %>" /><% } %>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="text/javascript" src="//cdn.auth0.com/w2/auth0-7.0.4.min.js"><\/script>\n    <script type="text/javascript" src="//cdn.auth0.com/manage/v0.3.1672/js/bundle.js"><\/script>\n    <script type="text/javascript">window.config = <%- JSON.stringify(config) %>;<\/script>\n    <% if (assets.vendors) { %><script type="text/javascript" src="/app/<%= assets.vendors %>"><\/script><% } %>\n    <% if (assets.app) { %><script type="text/javascript" src="/app/<%= assets.app %>"><\/script><% } %>\n    <% if (assets.version) { %>\n    <script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-logs-to-logstash/assets/auth0-logs-to-logstash.ui.vendors.2.1.0.js"><\/script>\n    <script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-logs-to-logstash/assets/auth0-logs-to-logstash.ui.2.1.0.js"><\/script>\n    <% } %>\n  </body>\n  </html>\n  ';return function(t,n,s){if(0===t.url.indexOf("/api"))return s();var a={AUTH0_DOMAIN:o("AUTH0_DOMAIN"),AUTH0_CLIENT_ID:o("EXTENSION_CLIENT_ID"),AUTH0_MANAGE_URL:o("AUTH0_MANAGE_URL")||"https://manage.auth0.com",BASE_URL:i.getBaseUrl(t),BASE_PATH:i.getBasePath(t),TITLE:o("TITLE")};return n.send(r.render(e,{config:a,assets:{customCss:o("CUSTOM_CSS"),version:"1.0.0"}}))}}}).call(t,"/")},function(e,t,n){"use strict";var r=n(143),i=n(5).Router,o=n(4).middlewares,s=n(3),a=n(66);e.exports=function(e){var t=i(),n=o.authenticateAdmins({credentialsRequired:!0,secret:s("EXTENSION_SECRET"),audience:"urn:logs-to-fluentd",baseUrl:s("PUBLIC_WT_URL")||s("WT_URL"),onLoginSuccess:function(e,t,n){return n()}});return t.get("/",a()),t.get("/api/report",n,function(t,n,i){return e.read().then(function(e){var i=e&&e.logs?r.sortByOrder(e.logs,"start","desc"):[],o=t.query.filter&&"errors"===t.query.filter?r.filter(i,function(e){return!!e.error}):i,s=t.query.page&&parseInt(t.query.page)?parseInt(t.query.page)-1:0,a=t.query.per_page&&parseInt(t.query.per_page)||10,u=a*s;return n.json({logs:o.slice(u,u+a),total:o.length})}).catch(i)}),t}},function(e,t,n){"use strict";var r=n(5),i=n(103);e.exports=function(){var e=r.Router();return e.get("/",function(e,t){t.status(200).send(i)}),e}},function(e,t,n){"use strict";var r=n(4),i=n(52),o=n(3),s=n(7),a=r.createServer(function(e,t){return s.info("Starting Auth0 Logs to Fluentd Extension - Version:","1.0.0"),i(e,t)});e.exports=function(e,t,n){o.setValue("PUBLIC_WT_URL",r.urlHelpers.getWebtaskUrl(t)),a(e,t,n)}},function(e,t,n){e.exports={default:n(73),__esModule:!0}},function(e,t,n){"use strict";
/*!
 * cookie-parser
 * Copyright(c) 2014 TJ Holowaychuk
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var r=n(72),i=n(138);function o(e){if("string"==typeof e&&"j:"===e.substr(0,2))try{return JSON.parse(e.slice(2))}catch(e){return}}function s(e){for(var t,n,r=Object.keys(e),i=0;i<r.length;i++)(n=o(e[t=r[i]]))&&(e[t]=n);return e}function a(e,t){if("string"==typeof e){if("s:"!==e.substr(0,2))return e;for(var n=!t||Array.isArray(t)?t||[]:[t],r=0;r<n.length;r++){var o=i.unsign(e.slice(2),n[r]);if(!1!==o)return o}return!1}}function u(e,t){for(var n,r,i,o=Object.keys(e),s=Object.create(null),u=0;u<o.length;u++)(i=e[r=o[u]])!==(n=a(i,t))&&(s[r]=n,delete e[r]);return s}e.exports=function(e,t){return function(n,i,o){if(n.cookies)return o();var a=n.headers.cookie,c=!e||Array.isArray(e)?e||[]:[e];if(n.secret=c[0],n.cookies=Object.create(null),n.signedCookies=Object.create(null),!a)return o();n.cookies=r.parse(a,t),0!==c.length&&(n.signedCookies=u(n.cookies,c),n.signedCookies=s(n.signedCookies)),n.cookies=s(n.cookies),o()}},e.exports.JSONCookie=o,e.exports.JSONCookies=s,e.exports.signedCookie=a,e.exports.signedCookies=u},function(e,t,n){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},i=t||{},s=e.split(o),u=i.decode||r,c=0;c<s.length;c++){var f=s[c],l=f.indexOf("=");if(!(l<0)){var h=f.substr(0,l).trim(),d=f.substr(++l,f.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),null==n[h]&&(n[h]=a(d,u))}}return n},t.serialize=function(e,t,n){var r=n||{},o=r.encode||i;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var a=o(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");var u=e+"="+a;if(null!=r.maxAge){var c=r.maxAge-0;if(isNaN(c))throw new Error("maxAge should be a Number");u+="; Max-Age="+Math.floor(c)}if(r.domain){if(!s.test(r.domain))throw new TypeError("option domain is invalid");u+="; Domain="+r.domain}if(r.path){if(!s.test(r.path))throw new TypeError("option path is invalid");u+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+r.expires.toUTCString()}r.httpOnly&&(u+="; HttpOnly");r.secure&&(u+="; Secure");if(r.sameSite){var f="string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite;switch(f){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return u};var r=decodeURIComponent,i=encodeURIComponent,o=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(t){return e}}},function(e,t,n){n(98),e.exports=n(12).Object.keys},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(16);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(32),i=n(94),o=n(93);e.exports=function(e){return function(t,n,s){var a,u=r(t),c=i(u.length),f=o(s,c);if(e&&n!=n){for(;c>f;)if((a=u[f++])!=a)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===n)return e||f||0;return!e&&-1}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(74);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(16),i=n(15).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(15),i=n(12),o=n(78),s=n(83),a=function(e,t,n){var u,c,f,l=e&a.F,h=e&a.G,d=e&a.S,p=e&a.P,g=e&a.B,v=e&a.W,y=h?i:i[t]||(i[t]={}),m=y.prototype,b=h?r:d?r[t]:(r[t]||{}).prototype;for(u in h&&(n=t),n)(c=!l&&b&&void 0!==b[u])&&u in y||(f=c?b[u]:n[u],y[u]=h&&"function"!=typeof b[u]?n[u]:g&&c?o(f,r):v&&b[u]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):p&&"function"==typeof f?o(Function.call,f):f,p&&((y.virtual||(y.virtual={}))[u]=f,e&a.R&&m&&!m[u]&&s(m,u,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(86),i=n(90);e.exports=n(13)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports=!n(13)&&!n(14)(function(){return 7!=Object.defineProperty(n(79)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(77);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(75),i=n(84),o=n(96),s=Object.defineProperty;t.f=n(13)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(82),i=n(32),o=n(76)(!1),s=n(91)("IE_PROTO");e.exports=function(e,t){var n,a=i(e),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(87),i=n(80);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(81),i=n(12),o=n(14);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(92)("keys"),i=n(97);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(15),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(31),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(31),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(30);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(16);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(95),i=n(88);n(89)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){"use strict";const r=n(35),i=n(34);let o=new r("debug");e.exports={configure:function(t,n){o.end(),(o=new r(t,n))._setupErrorHandler(),e.exports.emit=o.emit.bind(o)},createFluentSender:function(e,t){const n=new r(e,t);return n._setupErrorHandler(),n},support:{winstonTransport:function(){return n(101)}},EventTime:i};["end","addListener","on","once","removeListener","removeAllListeners","setMaxListeners","getMaxListeners"].forEach((t,n)=>{e.exports[t]=function(){if(o)return o[t].apply(o,arguments)}}),e.exports.emit=o.emit.bind(o)},function(e,t,n){"use strict";e.exports={};class r extends Error{constructor(e,t){super(),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,this.options=t}}e.exports={ConfigError:class extends r{constructor(e,t){super(e,t)}},MissingTag:class extends r{constructor(e,t){super(e,t)}},ResponseError:class extends r{constructor(e,t){super(e,t)}},DataTypeError:class extends r{constructor(e,t){super(e,t)}},ResponseTimeout:class extends r{constructor(e,t){super(e,t)}},HandshakeError:class extends r{constructor(e,t){super(e,t)}}}},function(e,t,n){"use strict";const r=n(35),i=n(130);e.exports=class extends i{constructor(e="winston",t={}){const n="object"==typeof e,i="string"==typeof e?e:n?e.tag||"winston":null,o=n?e:t||{};super(o),this.name="fluent",this.sender=new r(i,o),this.sender._setupErrorHandler()}log(e,t){setImmediate(()=>{this.sender.emit(e,n=>{n?(this.emit("error",e),t&&t(n,!1)):(this.emit("logged",e),t&&t(null,!0))})})}}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports={title:"Auth0 Logs to Fluentd",name:"auth0-logs-to-fluentd",version:"1.0.0",preVersion:"1.0.0",author:"goabout",category:"log_export",description:"This extension will continuously export your Auth0 logs to Fluentd",type:"cron",initialUrlPath:"/login",repository:"https://github.com/goabout/auth0-logs-to-fluentd",docsUrl:"https://github.com/goabout/auth0-logs-to-fluentd",logoUrl:"https://avatars1.githubusercontent.com/u/859518",keywords:["auth0","extension"],schedule:"0 */5 * * * *",auth0:{createClient:!0,onUninstallPath:"/.extensions/on-uninstall",scopes:"read:logs delete:clients"},secrets:{BATCH_SIZE:{description:"The amount of logs to batch before sending to Fluentd. A single cron execution will send multiple batches.",default:100},FLUENTD_HOST:{description:"Fluentd host",example:"example.com",required:!0},FLUENTD_PORT:{description:"Fluentd port",example:"24224",required:!0},FLUENTD_TLS:{description:"This setting will enable TLS for the connection to Fluentd",type:"select",allowMultiple:!1,default:"false",options:[{value:"false",text:"No"},{value:"true",text:"Yes"}]},FLUENTD_SHARED_KEY:{description:"Fluentd shared key(optional)",type:"password"},START_FROM:{description:"Checkpoint ID of log to start from."},SLACK_INCOMING_WEBHOOK_URL:{description:"Slack Incoming Webhook URL used to report statistics and possible failures"},SLACK_SEND_SUCCESS:{description:"This setting will enable verbose notifications to Slack which are useful for troubleshooting",type:"select",allowMultiple:!1,default:"false",options:[{value:"false",text:"No"},{value:"true",text:"Yes"}]},LOG_LEVEL:{description:"This allows you to specify the log level of events that need to be sent",type:"select",allowMultiple:!0,options:[{value:"-",text:""},{value:"0",text:"Debug"},{value:"1",text:"Info"},{value:"2",text:"Warning"},{value:"3",text:"Error"},{value:"4",text:"Critical"}]},LOG_TYPES:{description:"If you only want to send events with a specific type (eg: failed logins)",type:"select",allowMultiple:!0,options:[{text:"",value:"-"},{text:"Success Login",value:"s"},{text:"Success Exchange",value:"seacft"},{text:"Success Exchange (Client Credentials)",value:"seccft"},{text:"Failed Exchange",value:"feacft"},{text:"Failed Exchange (Client Credentials)",value:"feccft"},{text:"Failed Login",value:"f"},{text:"Warnings During Login",value:"w"},{text:"Deleted User",value:"du"},{text:"Failed Login (invalid email/username)",value:"fu"},{text:"Failed Login (wrong password)",value:"fp"},{text:"Failed by Connector",value:"fc"},{text:"Failed by CORS",value:"fco"},{text:"Connector Online",value:"con"},{text:"Connector Offline",value:"coff"},{text:"Failed Connector Provisioning",value:"fcpro"},{text:"Success Signup",value:"ss"},{text:"Failed Signup",value:"fs"},{text:"Code Sent",value:"cs"},{text:"Code/Link Sent",value:"cls"},{text:"Success Verification Email",value:"sv"},{text:"Failed Verification Email",value:"fv"},{text:"Success Change Password",value:"scp"},{text:"Failed Change Password",value:"fcp"},{text:"Success Change Email",value:"sce"},{text:"Failed Change Email",value:"fce"},{text:"Success Change Username",value:"scu"},{text:"Failed Change Username",value:"fcu"},{text:"Success Change Phone Number",value:"scpn"},{text:"Failed Change Phone Number",value:"fcpn"},{text:"Success Verification Email Request",value:"svr"},{text:"Failed Verification Email Request",value:"fvr"},{text:"Success Change Password Request",value:"scpr"},{text:"Failed Change Password Request",value:"fcpr"},{text:"Failed Sending Notification",value:"fn"},{text:"API Operation",value:"sapi"},{text:"Failed API Operation",value:"fapi"},{text:"Blocked Account",value:"limit_wc"},{text:"Too Many Calls to /userinfo",value:"limit_ui"},{text:"Rate Limit On API",value:"api_limit"},{text:"Successful User Deletion",value:"sdu"},{text:"Failed User Deletion",value:"fdu"},{text:"Blocked Account",value:"limit_wc"},{text:"Blocked IP Address",value:"limit_mu"},{text:"Success Logout",value:"slo"},{text:"Failed Logout",value:"flo"},{text:"Success Delegation",value:"sd"},{text:"Failed Delegation",value:"fd"}]}}}},function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,s=0,a=0,u="";o=t.charAt(a++);~o&&(i=s%4?64*i+o:o,s++%4)?u+=String.fromCharCode(255&i>>(-2*s&6)):0)o=n.indexOf(o);return u}},function(e,t,n){var r=n(104);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(t)}catch(e){return r(t)}}},function(e,t,n){t.encode=n(39).encode,t.decode=n(38).decode,t.Encoder=n(116).Encoder,t.Decoder=n(114).Decoder,t.createEncodeStream=n(115).createEncodeStream,t.createDecodeStream=n(113).createDecodeStream,t.createCodec=n(119).createCodec,t.codec=n(112).codec},function(e,t){function n(e){return e&&e.isBuffer&&e}e.exports=n("undefined"!=typeof Buffer&&Buffer)||n(this.Buffer)||n("undefined"!=typeof window&&window.Buffer)||this.Buffer},function(e,t){t.copy=function(e,t,n,r){var i;n||(n=0);r||0===r||(r=this.length);t||(t=0);var o=r-n;if(e===this&&n<t&&t<r)for(i=o-1;i>=0;i--)e[i+t]=this[i+n];else for(i=0;i<o;i++)e[i+t]=this[i+n];return o},t.toString=function(e,t,n){var r=0|t;n||(n=this.length);var i="",o=0;for(;r<n;)(o=this[r++])<128?i+=String.fromCharCode(o):(192==(224&o)?o=(31&o)<<6|63&this[r++]:224==(240&o)?o=(15&o)<<12|(63&this[r++])<<6|63&this[r++]:240==(248&o)&&(o=(7&o)<<18|(63&this[r++])<<12|(63&this[r++])<<6|63&this[r++]),o>=65536?(o-=65536,i+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):i+=String.fromCharCode(o));return i},t.write=function(e,t){var n=t||(t|=0),r=e.length,i=0,o=0;for(;o<r;)(i=e.charCodeAt(o++))<128?this[n++]=i:i<2048?(this[n++]=192|i>>>6,this[n++]=128|63&i):i<55296||i>57343?(this[n++]=224|i>>>12,this[n++]=128|i>>>6&63,this[n++]=128|63&i):(i=65536+(i-55296<<10|e.charCodeAt(o++)-56320),this[n++]=240|i>>>18,this[n++]=128|i>>>12&63,this[n++]=128|i>>>6&63,this[n++]=128|63&i);return n-t}},function(e,t,n){var r=n(0);function i(e){return new Array(e)}(t=e.exports=i(0)).alloc=i,t.concat=r.concat,t.from=function(e){if(!r.isBuffer(e)&&r.isView(e))e=r.Uint8Array.from(e);else if(r.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return r.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(e)}},function(e,t,n){var r=n(0),i=r.global;function o(e){return new i(e)}(t=e.exports=r.hasBuffer?o(0):[]).alloc=r.hasBuffer&&i.alloc||o,t.concat=r.concat,t.from=function(e){if(!r.isBuffer(e)&&r.isView(e))e=r.Uint8Array.from(e);else if(r.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return r.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(e):new i(e)}},function(e,t,n){var r=n(0);function i(e){return new Uint8Array(e)}(t=e.exports=r.hasArrayBuffer?i(0):[]).alloc=i,t.concat=r.concat,t.from=function(e){if(r.isView(e)){var n=e.byteOffset,i=e.byteLength;(e=e.buffer).byteLength!==i&&(e.slice?e=e.slice(n,n+i):(e=new Uint8Array(e)).byteLength!==i&&(e=Array.prototype.slice.call(e,n,n+i)))}else{if("string"==typeof e)return r.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(e)}},function(e,t,n){n(23),n(24),t.codec={preset:n(9).preset}},function(e,t,n){t.createDecodeStream=a;var r=n(2),i=n(6).Transform,o=n(20).DecodeBuffer;r.inherits(a,i);var s={objectMode:!0};function a(e){if(!(this instanceof a))return new a(e);e?e.objectMode=!0:e=s,i.call(this,e);var t=this;(this.decoder=new o(e)).push=function(e){t.push(e)}}a.prototype._transform=function(e,t,n){this.decoder.write(e),this.decoder.flush(),n&&n()}},function(e,t,n){t.Decoder=o;var r=n(33),i=n(20).DecodeBuffer;function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}o.prototype=new i,r.mixin(o.prototype),o.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},o.prototype.push=function(e){this.emit("data",e)},o.prototype.end=function(e){this.decode(e),this.emit("end")}},function(e,t,n){t.createEncodeStream=a;var r=n(2),i=n(6).Transform,o=n(21).EncodeBuffer;r.inherits(a,i);var s={objectMode:!0};function a(e){if(!(this instanceof a))return new a(e);e?e.objectMode=!0:e=s,i.call(this,e);var t=this;(this.encoder=new o(e)).push=function(e){t.push(e)}}a.prototype._transform=function(e,t,n){this.encoder.write(e),n&&n()},a.prototype._flush=function(e){this.encoder.flush(),e&&e()}},function(e,t,n){t.Encoder=o;var r=n(33),i=n(21).EncodeBuffer;function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}o.prototype=new i,r.mixin(o.prototype),o.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},o.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},function(e,t,n){t.setExtPackers=function(e){e.addExtPacker(14,Error,[l,u]),e.addExtPacker(1,EvalError,[l,u]),e.addExtPacker(2,RangeError,[l,u]),e.addExtPacker(3,ReferenceError,[l,u]),e.addExtPacker(4,SyntaxError,[l,u]),e.addExtPacker(5,TypeError,[l,u]),e.addExtPacker(6,URIError,[l,u]),e.addExtPacker(10,RegExp,[f,u]),e.addExtPacker(11,Boolean,[c,u]),e.addExtPacker(12,String,[c,u]),e.addExtPacker(13,Date,[Number,u]),e.addExtPacker(15,Number,[c,u]),"undefined"!=typeof Uint8Array&&(e.addExtPacker(17,Int8Array,s),e.addExtPacker(18,Uint8Array,s),e.addExtPacker(19,Int16Array,s),e.addExtPacker(20,Uint16Array,s),e.addExtPacker(21,Int32Array,s),e.addExtPacker(22,Uint32Array,s),e.addExtPacker(23,Float32Array,s),"undefined"!=typeof Float64Array&&e.addExtPacker(24,Float64Array,s),"undefined"!=typeof Uint8ClampedArray&&e.addExtPacker(25,Uint8ClampedArray,s),e.addExtPacker(26,ArrayBuffer,s),e.addExtPacker(29,DataView,s));i.hasBuffer&&e.addExtPacker(27,o,i.from)};var r,i=n(0),o=i.global,s=i.Uint8Array.from,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function u(e){return r||(r=n(39).encode),r(e)}function c(e){return e.valueOf()}function f(e){(e=RegExp.prototype.toString.call(e).split("/")).shift();var t=[e.pop()];return t.unshift(e.join("/")),t}function l(e){var t={};for(var n in a)t[n]=e[n];return t}},function(e,t,n){t.setExtUnpackers=function(e){e.addExtUnpacker(14,[a,c(Error)]),e.addExtUnpacker(1,[a,c(EvalError)]),e.addExtUnpacker(2,[a,c(RangeError)]),e.addExtUnpacker(3,[a,c(ReferenceError)]),e.addExtUnpacker(4,[a,c(SyntaxError)]),e.addExtUnpacker(5,[a,c(TypeError)]),e.addExtUnpacker(6,[a,c(URIError)]),e.addExtUnpacker(10,[a,u]),e.addExtUnpacker(11,[a,f(Boolean)]),e.addExtUnpacker(12,[a,f(String)]),e.addExtUnpacker(13,[a,f(Date)]),e.addExtUnpacker(15,[a,f(Number)]),"undefined"!=typeof Uint8Array&&(e.addExtUnpacker(17,f(Int8Array)),e.addExtUnpacker(18,f(Uint8Array)),e.addExtUnpacker(19,[l,f(Int16Array)]),e.addExtUnpacker(20,[l,f(Uint16Array)]),e.addExtUnpacker(21,[l,f(Int32Array)]),e.addExtUnpacker(22,[l,f(Uint32Array)]),e.addExtUnpacker(23,[l,f(Float32Array)]),"undefined"!=typeof Float64Array&&e.addExtUnpacker(24,[l,f(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&e.addExtUnpacker(25,f(Uint8ClampedArray)),e.addExtUnpacker(26,l),e.addExtUnpacker(29,[l,f(DataView)]));i.hasBuffer&&e.addExtUnpacker(27,f(o))};var r,i=n(0),o=i.global,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(e){return r||(r=n(38).decode),r(e)}function u(e){return RegExp.apply(null,e)}function c(e){return function(t){var n=new e;for(var r in s)n[r]=t[r];return n}}function f(e){return function(t){return new e(t)}}function l(e){return new Uint8Array(e).buffer}},function(e,t,n){n(23),n(24),t.createCodec=n(9).createCodec},function(e,t,n){var r=n(41);function i(e){var t,n=new Array(256);for(t=0;t<=127;t++)n[t]=o(t);for(t=128;t<=143;t++)n[t]=a(t-128,e.map);for(t=144;t<=159;t++)n[t]=a(t-144,e.array);for(t=160;t<=191;t++)n[t]=a(t-160,e.str);for(n[192]=o(null),n[193]=null,n[194]=o(!1),n[195]=o(!0),n[196]=s(e.uint8,e.bin),n[197]=s(e.uint16,e.bin),n[198]=s(e.uint32,e.bin),n[199]=s(e.uint8,e.ext),n[200]=s(e.uint16,e.ext),n[201]=s(e.uint32,e.ext),n[202]=e.float32,n[203]=e.float64,n[204]=e.uint8,n[205]=e.uint16,n[206]=e.uint32,n[207]=e.uint64,n[208]=e.int8,n[209]=e.int16,n[210]=e.int32,n[211]=e.int64,n[212]=a(1,e.ext),n[213]=a(2,e.ext),n[214]=a(4,e.ext),n[215]=a(8,e.ext),n[216]=a(16,e.ext),n[217]=s(e.uint8,e.str),n[218]=s(e.uint16,e.str),n[219]=s(e.uint32,e.str),n[220]=s(e.uint16,e.array),n[221]=s(e.uint32,e.array),n[222]=s(e.uint16,e.map),n[223]=s(e.uint32,e.map),t=224;t<=255;t++)n[t]=o(t-256);return n}function o(e){return function(){return e}}function s(e,t){return function(n){var r=e(n);return t(n,r)}}function a(e,t){return function(n){return t(n,e)}}t.getReadToken=function(e){var t=r.getReadFormat(e);return e&&e.useraw?function(e){var t,n=i(e).slice();for(n[217]=n[196],n[218]=n[197],n[219]=n[198],t=160;t<=191;t++)n[t]=a(t-160,e.bin);return n}(t):i(t)}},function(e,t,n){var r=n(36),i=n(18),o=i.Uint64BE,s=i.Int64BE,a=n(42).uint8,u=n(0),c=u.global,f=u.hasBuffer&&"TYPED_ARRAY_SUPPORT"in c&&!c.TYPED_ARRAY_SUPPORT,l=u.hasBuffer&&c.prototype||{};function h(){var e=a.slice();return e[196]=d(196),e[197]=p(197),e[198]=g(198),e[199]=d(199),e[200]=p(200),e[201]=g(201),e[202]=v(202,4,l.writeFloatBE||b,!0),e[203]=v(203,8,l.writeDoubleBE||w,!0),e[204]=d(204),e[205]=p(205),e[206]=g(206),e[207]=v(207,8,y),e[208]=d(208),e[209]=p(209),e[210]=g(210),e[211]=v(211,8,m),e[217]=d(217),e[218]=p(218),e[219]=g(219),e[220]=p(220),e[221]=g(221),e[222]=p(222),e[223]=g(223),e}function d(e){return function(t,n){var r=t.reserve(2),i=t.buffer;i[r++]=e,i[r]=n}}function p(e){return function(t,n){var r=t.reserve(3),i=t.buffer;i[r++]=e,i[r++]=n>>>8,i[r]=n}}function g(e){return function(t,n){var r=t.reserve(5),i=t.buffer;i[r++]=e,i[r++]=n>>>24,i[r++]=n>>>16,i[r++]=n>>>8,i[r]=n}}function v(e,t,n,r){return function(i,o){var s=i.reserve(t+1);i.buffer[s++]=e,n.call(i.buffer,o,s,r)}}function y(e,t){new o(this,t,e)}function m(e,t){new s(this,t,e)}function b(e,t){r.write(this,e,t,!1,23,4)}function w(e,t){r.write(this,e,t,!1,52,8)}t.getWriteToken=function(e){return e&&e.uint8array?((t=h())[202]=v(202,4,b),t[203]=v(203,8,w),t):f||u.hasBuffer&&e&&e.safe?function(){var e=a.slice();return e[196]=v(196,1,c.prototype.writeUInt8),e[197]=v(197,2,c.prototype.writeUInt16BE),e[198]=v(198,4,c.prototype.writeUInt32BE),e[199]=v(199,1,c.prototype.writeUInt8),e[200]=v(200,2,c.prototype.writeUInt16BE),e[201]=v(201,4,c.prototype.writeUInt32BE),e[202]=v(202,4,c.prototype.writeFloatBE),e[203]=v(203,8,c.prototype.writeDoubleBE),e[204]=v(204,1,c.prototype.writeUInt8),e[205]=v(205,2,c.prototype.writeUInt16BE),e[206]=v(206,4,c.prototype.writeUInt32BE),e[207]=v(207,8,y),e[208]=v(208,1,c.prototype.writeInt8),e[209]=v(209,2,c.prototype.writeInt16BE),e[210]=v(210,4,c.prototype.writeInt32BE),e[211]=v(211,8,m),e[217]=v(217,1,c.prototype.writeUInt8),e[218]=v(218,2,c.prototype.writeUInt16BE),e[219]=v(219,4,c.prototype.writeUInt32BE),e[220]=v(220,2,c.prototype.writeUInt16BE),e[221]=v(221,4,c.prototype.writeUInt32BE),e[222]=v(222,2,c.prototype.writeUInt16BE),e[223]=v(223,4,c.prototype.writeUInt32BE),e}():h();var t}},function(e,t,n){var r=n(8),i=n(18),o=i.Uint64BE,s=i.Int64BE,a=n(0),u=n(19),c=n(121),f=n(42).uint8,l=n(22).ExtBuffer,h="undefined"!=typeof Uint8Array,d="undefined"!=typeof Map,p=[];p[1]=212,p[2]=213,p[4]=214,p[8]=215,p[16]=216,t.getWriteType=function(e){var t=c.getWriteToken(e),n=e&&e.useraw,i=h&&e&&e.binarraybuffer,g=i?a.isArrayBuffer:a.isBuffer,v=i?function(e,t){w(e,new Uint8Array(t))}:w,y=d&&e&&e.usemap?function(e,n){if(!(n instanceof Map))return x(e,n);var r=n.size;t[r<16?128+r:r<=65535?222:223](e,r);var i=e.codec.encode;n.forEach(function(t,n,r){i(e,n),i(e,t)})}:x;return{boolean:function(e,n){t[n?195:194](e,n)},function:b,number:function(e,n){var r,i=0|n;if(n!==i)return void t[r=203](e,n);r=-32<=i&&i<=127?255&i:0<=i?i<=255?204:i<=65535?205:206:-128<=i?208:-32768<=i?209:210;t[r](e,i)},object:n?function(e,n){if(g(n))return function(e,n){var r=n.length;t[r<32?160+r:r<=65535?218:219](e,r),e.send(n)}(e,n);m(e,n)}:m,string:function(e){return function(n,r){var i=r.length,o=5+3*i;n.offset=n.reserve(o);var s=n.buffer,a=e(i),c=n.offset+a;i=u.write.call(s,r,c);var f=e(i);if(a!==f){var l=c+f-a,h=c+i;u.copy.call(s,s,l,c,h)}t[1===f?160+i:f<=3?215+f:219](n,i),n.offset+=i}}(n?function(e){return e<32?1:e<=65535?3:5}:function(e){return e<32?1:e<=255?2:e<=65535?3:5}),symbol:b,undefined:b};function m(e,n){if(null===n)return b(e,n);if(g(n))return v(e,n);if(r(n))return function(e,n){var r=n.length;t[r<16?144+r:r<=65535?220:221](e,r);for(var i=e.codec.encode,o=0;o<r;o++)i(e,n[o])}(e,n);if(o.isUint64BE(n))return function(e,n){t[207](e,n.toArray())}(e,n);if(s.isInt64BE(n))return function(e,n){t[211](e,n.toArray())}(e,n);var i=e.codec.getExtPacker(n);if(i&&(n=i(n)),n instanceof l)return function(e,n){var r=n.buffer,i=r.length,o=p[i]||(i<255?199:i<=65535?200:201);t[o](e,i),f[n.type](e),e.send(r)}(e,n);y(e,n)}function b(e,n){t[192](e,n)}function w(e,n){var r=n.length,i=r<255?196:r<=65535?197:198;t[i](e,r),e.send(n)}function x(e,n){var r=Object.keys(n),i=r.length,o=i<16?128+i:i<=65535?222:223;t[o](e,i);var s=e.codec.encode;r.forEach(function(t){s(e,t),s(e,n[t])})}}},function(e,t,n){var r=n(151);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=r(i),e.exports.strict=r(o),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},function(e,t,n){"use strict";t.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9},t.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}},function(e,t,n){"use strict";Object.defineProperty(t,"cli",{value:n(124)}),Object.defineProperty(t,"npm",{value:n(126)}),Object.defineProperty(t,"syslog",{value:n(127)})},function(e,t,n){"use strict";t.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6},t.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}},function(e,t,n){"use strict";t.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7},t.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}},function(e,t,n){"use strict";Object.defineProperty(t,"LEVEL",{value:Symbol.for("level")}),Object.defineProperty(t,"MESSAGE",{value:Symbol.for("message")}),Object.defineProperty(t,"SPLAT",{value:Symbol.for("splat")}),Object.defineProperty(t,"configs",{value:n(125)})},function(e,t,n){e.exports=n(2).deprecate},function(e,t,n){"use strict";const r=n(2),i=n(133),{LEVEL:o}=n(128),s=e.exports=function(e={}){i.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",e=>{this.levels=e.levels,this.parent=e}),this.once("unpipe",e=>{e===this.parent&&(this.parent=null,this.close&&this.close())})};r.inherits(s,i),s.prototype._write=function(e,t,n){if(this.silent||!0===e.exception&&!this.handleExceptions)return n(null);const r=this.level||this.parent&&this.parent.level;if(!r||this.levels[r]>=this.levels[e[o]]){if(e&&!this.format)return this.log(e,n);let t,r;try{r=this.format.transform(Object.assign({},e),this.format.options)}catch(e){t=e}if(t||!r){if(n(),t)throw t;return}return this.log(r,n)}return n(null)},s.prototype._writev=function(e,t){if(this.logv){const n=e.filter(this._accept,this);return n.length?this.logv(n,t):t(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let r,i;try{i=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(e){r=e}if(r||!i){if(e[n].callback(),r)throw t(null),r}else this.log(i,e[n].callback)}return t(null)},s.prototype._accept=function(e){const t=e.chunk;if(this.silent)return!1;const n=this.level||this.parent&&this.parent.level;return!(!0!==t.exception&&n&&!(this.levels[n]>=this.levels[t[o]])||!this.handleExceptions&&!0===t.exception)},s.prototype._nop=function(){}},function(e,t,n){"use strict";var r=n(10);e.exports=m;var i,o=n(8);m.ReadableState=y;n(49).EventEmitter;var s=function(e,t){return e.listeners(t).length},a=n(45),u=n(25).Buffer,c=global.Uint8Array||function(){};var f=n(26);f.inherits=n(17);var l=n(2),h=void 0;h=l&&l.debuglog?l.debuglog("stream"):function(){};var d,p=n(132),g=n(44);f.inherits(m,a);var v=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var r=t instanceof(i=i||n(11));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(46).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function m(e){if(i=i||n(11),!(this instanceof m))return new m(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function b(e,t,n,r,i){var o,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,E(e)}(e,s)):(i||(o=function(e,t){var n;r=t,u.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?w(e,s,t,!1):S(e,s)):w(e,s,t,!1))):r||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&E(e)),S(e,t)}Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),m.prototype.destroy=g.destroy,m.prototype._undestroy=g.undestroy,m.prototype._destroy=function(e,t){this.push(null),t(e)},m.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},m.prototype.unshift=function(e){return b(this,e,null,!0,!1)},m.prototype.isPaused=function(){return!1===this._readableState.flowing},m.prototype.setEncoding=function(e){return d||(d=n(46).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};var x=8388608;function _(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(k,e):k(e))}function k(e){h("emit readable"),e.emit("readable"),C(e)}function S(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(T,e,t))}function T(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function A(e){h("readable nexttick read 0"),e.read(0)}function U(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=u.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0===(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r.nextTick(B,t,e))}function B(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}m.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):E(this),null;if(0===(e=_(e,t))&&t.ended)return 0===t.length&&R(this),null;var r,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=_(n,t))),null===(r=e>0?M(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&R(this)),null!==r&&this.emit("data",r),r},m.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},m.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?c:m;function u(t,r){h("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,h("cleanup"),e.removeListener("close",v),e.removeListener("finish",y),e.removeListener("drain",f),e.removeListener("error",g),e.removeListener("unpipe",u),n.removeListener("end",c),n.removeListener("end",m),n.removeListener("data",p),l=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function c(){h("onend"),e.end()}i.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",u);var f=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,C(e))}}(n);e.on("drain",f);var l=!1;var d=!1;function p(t){h("ondata"),d=!1,!1!==e.write(t)||d||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==L(i.pipes,e))&&!l&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function g(t){h("onerror",t),m(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",y),m()}function y(){h("onfinish"),e.removeListener("close",v),m()}function m(){h("unpipe"),n.unpipe(e)}return n.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",v),e.once("finish",y),e.emit("pipe",n),i.flowing||(h("pipe resume"),n.resume()),e},m.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=L(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},m.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&E(this):r.nextTick(A,this))}return n},m.prototype.addListener=m.prototype.on,m.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(U,e,t))}(this,e)),this},m.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},m.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(h("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<v.length;o++)e.on(v[o],this.emit.bind(this,v[o]));return this._read=function(t){h("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(m.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),m._fromList=M},function(e,t,n){"use strict";var r=n(25).Buffer,i=n(2);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,o=r.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,n=o,i=a,t.copy(n,i),a+=s.data.length,s=s.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t,n){var r=n(6),i=n(43);"disable"===n.i({NODE_ENV:"production",CLIENT_VERSION:"1.0.0"}).READABLE_STREAM?e.exports=r&&r.Writable||i:e.exports=i},function(e,t,n){var r=n(47),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t){e.exports=require("async@2.1.2")},function(e,t){e.exports=require("auth0-log-extension-tools@1.3.6")},function(e,t){e.exports=require("body-parser@1.12.4")},function(e,t){e.exports=require("cookie-signature@1.0.6")},function(e,t){e.exports=require("ejs@2.3.1")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("jsonwebtoken@7.1.9")},function(e,t){e.exports=require("jwks-rsa@1.1.1")},function(e,t){e.exports=require("lodash@3.10.1")},function(e,t){e.exports=require("moment@2.10.3")},function(e,t){e.exports=require("morgan@1.5.3")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("request@2.56.0")},function(e,t){e.exports=require("tls")},function(e,t){e.exports=require("webtask-tools")},function(e,t){e.exports=require("winston@1.0.0")},function(e,t){e.exports=require("wrappy@1.0.1")},function(e,t){e.exports=require("zlib")}]);